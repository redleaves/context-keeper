graph LR
    A[编辑器事件] --> B[MCP客户端]
    B --> |WebSocket| C[MCP服务器]
    C --> D[事件分发]
    D --> E[上下文关联]
    D --> F[向量存储]
    D --> G[会话更新]